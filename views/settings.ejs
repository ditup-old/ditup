<%
var css = [
  '/css/header.css',
  '/css/settings.css',
];
var title = `${data.username} - settings - ditup`;


var verifiedMail = data.isEmailVerified ? 'verified' : 'not verified';

var errors = errors || {};
var values = values || {};

var headScripts = [];
var scripts = [];

%><% include ./partial/page-top.ejs %>
<% include ./partial/header.ejs %>

<section class="page">
  <header>
    <h1><i class="fa fa-cog"></i> Settings for <span class="icon-user"><%= data.username %></span></h1>
  </header>
  <section class="settings-section settings-user">
    <header>
      <h2>User</h2>
    </header>
    Something might be here.
  </section>
  <section class="settings-section settings-email">
    <header>
      <h2>Email</h2>
    </header>
    <div>
      <i class="fa fa-envelope"></i> <span class="settings-current-email"><%= data.email %></span> <span class="settings-email-verified"><%= data.isEmailVerified ? 'verified' : 'not verified' %></span>
      <% if(data.isEmailVerified === false) { %>
        <form class="settings-send-verification-code" method="post">
          <input type="submit" name="action" value="send verification code" />
        </form>
      <% } %>
    </div>
    <hr />
    <form class="settings-new-email" action="" method="post">
      <input type="text" name="new-email" value="<%= values.newEmail %>" placeholder="new email" />
      <br />
      <input type="password" name="password" value="<%= values.password %>" placeholder="password" />
      <br />
      <input type="submit" name="action" value="change email" />
    </form>
  </section>
  <section class="settings-section settings-password">
    <header>
      <h2>Password</h2>
    </header>
    <form class="settings-new-password" action="" method="post">
      <input type="password" name="current-password" value="" placeholder="current password" />
      <br />
      <input type="password" name="new-password" value="" placeholder="new password" />
      <br />
      <input type="password" name="new-password2" value="" placeholder="repeat new password" />
      <br />
      <input type="submit" name="action" value="change password" />
    </form>
  </section>
  <section class="settings-section settings-danger">
    <header>
      <h2>Danger</h2>
    </header>
    <form class="settings-delete-account" action="" method="post">
      <input type="submit" name="action" value="delete account" />
    </form>
  </section>
</section>

<!--h1></h1>
<div id="privacy-settings">
  <form method="post" >
    <div>
      Who can view this user 
      <select name="view">
        <option value="all" <% if (data.settings.view === 'all') { %>selected <% } %>>everybody</option>
        <option value="me" <% if (data.settings.view === 'me') { %>selected <% } %>>only me</option>
      </select>
      <span><%= errors.view %></span>
    </div>
    <input class="button" type="submit" value="Update Settings" />
  </form>
</div>
<div id="change-email">
  <h1>Change Email Address</h1>
  <form method="post" action="/account/change-email" >
    email address<br />
    <input type="text" name="email" value="<%= data.email %>" /><%= errors.email %> <%= verifiedMail %><br />
    password (changing sensitive data)<br />
    <input type="password" name="password" placeholder="password" /><br />
    <input class="button" type="submit" value="Change Email" />
  </form>
</div>
<div id="change-password">
  <h1>Change Password</h1>
  <form method="post" action="/account/change-password" >
    old password<br />
    <input type="password" name="old-password" placeholder="password" /><br />
    new password<br />
    <input type="password" name="password" placeholder="password" /><br />
    retype new password<br />
    <input type="password" name="password2" placeholder="password" /><br />
    <input class="button" type="submit" value="Change Password" />
  </form>
</div>
<div>Danger</div>
<div id="delete-account" >
  <h1>Delete Account</h1>
  <a href="/account/delete-user" class="button">Delete Account</a>
</div-->
<% include ./partial/page-bottom.ejs %>
