<%
var css = [
  '/css/header.css',
  '/css/user-profile.css',
  '/css/tag-elem.css'
];
var title = 'profile of '+profile.username ;

var headScripts = [
//  {
//    src: '/libs/js/require.js',
//    properties: {
//      'data-main': '/js/user-profile/main'
//    }
//  }
];
var scripts = [];

%><% include ./partial/page-top.ejs %>
<% include ./partial/header.ejs %>
<style>
  .avatar-pic {
    background-image: url('/user/<%= profile.username %>/avatar');
    background-repeat: no-repeat;
    background-size: contain;
    width:100%;
    padding-bottom:100%;
  }
</style>
<section class="panel-basic" ><!-- basic profile info -->
  <div class="avatar-pic" ></div>
  <div class="profile-age"><%= profile.age %></div>
  <div class="profile-gender"><%= profile.gender %></div>
  <div class="profile-joined"><%= profile.joined %></div>
  <div class="profile-active"><%= profile.active %></div>
</section>
<section class="panel-info" ><!--  -->
  <div>
    <span class="profile-name" ><%= profile.name %></span>
    <span class="profile-username icon-user" ><%= profile.username %></span>
    <% if (session.logged === true && session.username !== profile.username) { %><span><a class="write-message fa fa-comment" href="/messages/<%= profile.username %>"></a></span><% } %>
  </div><%
        /**
         * ********************** *
         *    follow         *
         * ********************** *
         */

        var follow = {
          view: !!session.logged,
          edit: !!session.logged && profile.username !== session.username,
          following: profile.following,
          followers: profile.followers
        };

      %><% include partial/follow.ejs %>
  <section class="user-tags"><!-- tags -->
    <ul id="tag-list" class="tag-list">
      <% for(let tag of tags) { %>
      <li class="tag icon-tag" ><%= tag.name %></li>
      <% } %>
    </ul>
    <% if(session.logged === true && session.username === profile.username) { %>
    <a class="edit-tags-link" href="/user/<%= session.username %>/edit?field=tags">edit tags</a>
    <% } %>
  </section>
  <section class="profile-about"><%- profile.about %></section>
</section>
<% include ./partial/page-bottom.ejs %>
